{"version":3,"file":"ServerConfigPanel-DuxsA9z2.js","sources":["../../src/components/dialog/content/setting/ServerConfigPanel.vue"],"sourcesContent":["<template>\n  <PanelTemplate value=\"Server-Config\" class=\"server-config-panel\">\n    <template #header>\n      <div class=\"flex flex-col gap-2\">\n        <Message\n          v-if=\"modifiedConfigs.length > 0\"\n          severity=\"info\"\n          pt:text=\"w-full\"\n        >\n          <p>\n            {{ $t('serverConfig.modifiedConfigs') }}\n          </p>\n          <ul>\n            <li v-for=\"config in modifiedConfigs\" :key=\"config.id\">\n              {{ config.name }}: {{ config.initialValue }} â†’ {{ config.value }}\n            </li>\n          </ul>\n          <div class=\"flex justify-end gap-2\">\n            <Button\n              :label=\"$t('serverConfig.revertChanges')\"\n              outlined\n              @click=\"revertChanges\"\n            />\n            <Button\n              :label=\"$t('serverConfig.restart')\"\n              outlined\n              severity=\"danger\"\n              @click=\"restartApp\"\n            />\n          </div>\n        </Message>\n        <Message v-if=\"commandLineArgs\" severity=\"secondary\" pt:text=\"w-full\">\n          <template #icon>\n            <i-lucide:terminal class=\"text-xl font-bold\" />\n          </template>\n          <div class=\"flex items-center justify-between\">\n            <p>{{ commandLineArgs }}</p>\n            <Button\n              icon=\"pi pi-clipboard\"\n              severity=\"secondary\"\n              text\n              @click=\"copyCommandLineArgs\"\n            />\n          </div>\n        </Message>\n      </div>\n    </template>\n    <div\n      v-for=\"([label, items], i) in Object.entries(serverConfigsByCategory)\"\n      :key=\"label\"\n    >\n      <Divider v-if=\"i > 0\" />\n      <h3>{{ $t(`serverConfigCategories.${label}`, label) }}</h3>\n      <div v-for=\"item in items\" :key=\"item.name\" class=\"mb-4\">\n        <FormItem\n          :id=\"item.id\"\n          v-model:formValue=\"item.value\"\n          :item=\"translateItem(item)\"\n          :label-class=\"{\n            'text-highlight': item.initialValue !== item.value\n          }\"\n        />\n      </div>\n    </div>\n  </PanelTemplate>\n</template>\n\n<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia'\nimport Button from 'primevue/button'\nimport Divider from 'primevue/divider'\nimport Message from 'primevue/message'\nimport { watch } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport FormItem from '@/components/common/FormItem.vue'\nimport { useCopyToClipboard } from '@/composables/useCopyToClipboard'\nimport type { ServerConfig } from '@/constants/serverConfig'\nimport { useServerConfigStore } from '@/stores/serverConfigStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport type { FormItem as FormItemType } from '@/types/settingTypes'\nimport { electronAPI } from '@/utils/envUtil'\n\nimport PanelTemplate from './PanelTemplate.vue'\n\nconst settingStore = useSettingStore()\nconst serverConfigStore = useServerConfigStore()\nconst {\n  serverConfigsByCategory,\n  serverConfigValues,\n  launchArgs,\n  commandLineArgs,\n  modifiedConfigs\n} = storeToRefs(serverConfigStore)\n\nconst revertChanges = () => {\n  serverConfigStore.revertChanges()\n}\n\nconst restartApp = async () => {\n  await electronAPI().restartApp()\n}\n\nwatch(launchArgs, async (newVal) => {\n  await settingStore.set('Comfy.Server.LaunchArgs', newVal)\n})\n\nwatch(serverConfigValues, async (newVal) => {\n  await settingStore.set('Comfy.Server.ServerConfigValues', newVal)\n})\n\nconst { copyToClipboard } = useCopyToClipboard()\nconst copyCommandLineArgs = async () => {\n  await copyToClipboard(commandLineArgs.value)\n}\n\nconst { t } = useI18n()\nconst translateItem = (item: ServerConfig<any>): FormItemType => {\n  return {\n    ...item,\n    name: t(`serverConfigItems.${item.id}.name`, item.name),\n    tooltip: item.tooltip\n      ? t(`serverConfigItems.${item.id}.tooltip`, item.tooltip)\n      : undefined\n  }\n}\n</script>\n"],"names":["_createBlock","PanelTemplate","_createElementVNode","_unref","Message","$t","_createElementBlock","_Fragment","_renderList","_toDisplayString","_createVNode","Button","Divider"],"mappings":"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"}